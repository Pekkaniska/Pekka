////////////////////////////////////////////////////////////////////////////////
// Обработка событий начала работы с Центром спутникового мониторинга
// 
////////////////////////////////////////////////////////////////////////////////

#Область СлужебныеПроцедурыИФункции

Процедура ПередНачаломРаботыСистемы(Параметры) Экспорт

	Если НЕ ItobВызовСервераПовтИсп.ПользовательИспользуетЦСМ() Тогда
		Возврат;
	КонецЕсли;	
					
	// Устанавливает часовой пояс текущего сеанса
	ItobОперативныйМониторингКлиент.ОпределениеЧасовогоПоясаСеанса();
	
	// Адрес CsmService
	КлиентскаяСтрокаСоединения = СтрокаСоединенияИнформационнойБазы();
	ItobОперативныйМониторингКлиентСервер.ОпределитьАдресCsmSvc(КлиентскаяСтрокаСоединения);	

КонецПроцедуры // ПередНачаломРаботыСистемы()

Процедура ПриНачалеРаботыСистемы(Параметры) Экспорт
	
	Если НЕ ItobВызовСервераПовтИсп.ПользовательИспользуетЦСМ() Тогда
		Возврат;
	КонецЕсли;
		
	Если ItobВызовСервераПовтИсп.ДанныеТерминаловБратьИзБазыIMCS() Тогда
		ItobОбщегоНазначенияВызовСервера.УстановитьСоединениеСВнешнимиИсточникамиДанных();
	
	КонецЕсли;	

КонецПроцедуры // ПриНачалеРаботыСистемы()

Процедура ОбработкаБлокировкиВходаПользователя(ДополнительныеПараметры) Экспорт

	ЗавершитьРаботуСистемы(Ложь,Ложь);

КонецПроцедуры

#КонецОбласти
