
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	//уатЗащищенныеФункцииСервер.уатСправочникФормаСпискаПриСозданииНаСервере(Отказ, СтандартнаяОбработка, ДопПараметрыОткрытие);
	Если Отказ тогда
		Возврат;
	КонецЕсли;
	
	// УправлениеПредприятием.СлужебныеПодсистемы
	СобытияФорм.ПриСозданииНаСервере(ЭтаФорма, Отказ, СтандартнаяОбработка);
	// Конец УправлениеПредприятием.СлужебныеПодсистемы
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	//уатЗащищенныеФункцииКлиент.уатСправочникФормаСпискаПриОткрытии(Отказ, ДопПараметрыОткрытие);
	Если Отказ Тогда
		Возврат;
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

// УправлениеПредприятием.СлужебныеПодсистемы
&НаКлиенте
Процедура Подключаемый_ВыполнитьПереопределяемуюКоманду(Команда)
	СобытияФормКлиент.ВыполнитьПереопределяемуюКоманду(ЭтаФорма, Команда);
КонецПроцедуры
// Конец УправлениеПредприятием.СлужебныеПодсистемы

&НаКлиенте
Процедура Очистить(Команда)
	Если СправочникНеПустой() Тогда
		Ответ = Неопределено;

		ПоказатьВопрос(Новый ОписаниеОповещения("ОчиститьЗавершение", ЭтотОбъект), "Справочник не пуст. Сейчас все его элементы будут удалены. Продолжить?", РежимДиалогаВопрос.ДаНет);
        Возврат; 
	КонецЕсли;
	
	ОчиститьФрагмент();
КонецПроцедуры

&НаКлиенте
Процедура Заполнить(Команда)
	Если СправочникНеПустой() Тогда
		Ответ = Неопределено;

		ПоказатьВопрос(Новый ОписаниеОповещения("ЗаполнитьЗавершение", ЭтотОбъект), "Справочник не пуст. Сейчас все его элементы будут удалены. Продолжить?", РежимДиалогаВопрос.ДаНет);
        Возврат; 
	КонецЕсли; 
	
	ЗаполнитьФрагмент();
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция СправочникНеПустой()
	Выборка = Справочники.уатКлассификаторВидыТранспортныхСредств.Выбрать();
	Если Выборка.Следующий() Тогда
		Возврат Истина;
	Иначе
		Возврат Ложь;
	КонецЕсли;
КонецФункции

&НаСервере
Процедура ОчиститьСервер()
	Выборка = Справочники.уатКлассификаторВидыТранспортныхСредств.Выбрать();
	Пока Выборка.Следующий() Цикл
		СпрОбъект = Выборка.ПолучитьОбъект();
		СпрОбъект.Удалить();
	КонецЦикла;
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьСервер()
	Макет = Справочники.уатКлассификаторВидыТранспортныхСредств.ПолучитьМакет("Списки2006Кв1");
	ТекОбласть = Макет.Области.Найти("ВидыТранспортныхСредств");
	
	Если ТекОбласть <> Неопределено Тогда	
		
		Для Ном = ТекОбласть.Верх По ТекОбласть.Низ Цикл
			// Перебираем строки макета.
			КодПоказателя = СокрП(Макет.Область(Ном, 1).Текст);
			Название = СокрП(Макет.Область(Ном, 2).Текст);
			Если КодПоказателя = "" Тогда
				Продолжить;
			Иначе
				эл = Справочники.уатКлассификаторВидыТранспортныхСредств.СоздатьЭлемент();
				эл.Код = КодПоказателя;
				эл.Наименование = Название;
				эл.Записать();
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ОчиститьЗавершение(РезультатВопроса, ДополнительныеПараметры) Экспорт
    
    Ответ = РезультатВопроса;
    Если Ответ = КодВозвратаДиалога.Нет Тогда
        Возврат;
    КонецЕсли; 
    
    ОчиститьФрагмент();

КонецПроцедуры

&НаКлиенте
Процедура ОчиститьФрагмент()
    
    ОчиститьСервер();
    
    Элементы.Список.Обновить();

КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьЗавершение(РезультатВопроса, ДополнительныеПараметры) Экспорт
    
    Ответ = РезультатВопроса;
    Если Ответ = КодВозвратаДиалога.Да Тогда
        ОчиститьСервер();
    Иначе
        Возврат;
    КонецЕсли; 
    
    ЗаполнитьФрагмент();

КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьФрагмент()
    
    ЗаполнитьСервер();
    
    Элементы.Список.Обновить();

КонецПроцедуры

#КонецОбласти
