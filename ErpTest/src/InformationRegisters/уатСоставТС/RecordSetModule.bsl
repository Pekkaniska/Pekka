
Процедура ПередЗаписью(Отказ, Замещение)
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Для Каждого ТекЗапись Из ЭтотОбъект Цикл
		Если ТекЗапись.ТС = ТекЗапись.ВСоставе Тогда
			уатОбщегоНазначенияТиповые.СообщитьОбОшибке("Нельзя указывать в составе ТС или оборудование само на себя!", Отказ,,СтатусСообщения.Внимание);
		КонецЕсли;
		
		Запрос = Новый Запрос;
		Запрос.Текст = "ВЫБРАТЬ
		|	уатСоставТС.ТС,
		|	уатСоставТС.ВСоставе
		|ИЗ
		|	РегистрСведений.уатСоставТС КАК уатСоставТС
		|ГДЕ
		|	уатСоставТС.ТС = &ТС";
		
		Запрос.УстановитьПараметр("ТС", ТекЗапись.ТС);
		
		Выборка = Запрос.Выполнить().Выбрать();
		Если Выборка.Следующий() Тогда
			уатОбщегоНазначенияТиповые.СообщитьОбОшибке("Невозможно произвести операцию. ТС """ + ТекЗапись.ТС
				+ """ уже в составе ТС """ + Выборка.ВСоставе + """!", Отказ,,СтатусСообщения.Внимание);
		КонецЕсли;
	КонецЦикла;
КонецПроцедуры
