
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ИнициализацияКомпоновщика();
КонецПроцедуры

&НаСервере
Процедура ИнициализацияКомпоновщика()

	СхемаКомпоновкиДанных = РеквизитФормыВЗначение("Объект").ПолучитьМакет("КомпоновкаДанных");
	АдресСхемыКомпоновкиДанных = ПоместитьВоВременноеХранилище(СхемаКомпоновкиДанных, УникальныйИдентификатор);
	КомпоновщикДанных.Инициализировать(Новый ИсточникДоступныхНастроекКомпоновкиДанных(АдресСхемыКомпоновкиДанных));
	КомпоновщикДанных.ЗагрузитьНастройки(СхемаКомпоновкиДанных.НастройкиПоУмолчанию);
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Для Каждого ТекЭлемент Из ВладелецФормы.КомпоновщикДанных.Настройки.Порядок.Элементы Цикл
		ТекНастройка = КомпоновщикДанных.Настройки.Порядок.Элементы.Добавить(Тип("ЭлементПорядкаКомпоновкиДанных"));
		ЗаполнитьЗначенияСвойств(ТекНастройка, ТекЭлемент);	
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура ОК(Команда)	
	Закрыть(КомпоновщикДанных.Настройки.Порядок.Элементы);		
КонецПроцедуры
