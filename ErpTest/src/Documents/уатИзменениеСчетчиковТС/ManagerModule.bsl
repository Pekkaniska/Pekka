#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Инициализирует таблицы значений, содержащие данные табличных частей документа.
// Таблицы значений сохраняет в свойствах структуры "ДополнительныеСвойства".
//
Процедура ИнициализироватьДанныеДокумента(ДокументСсылка, СтруктураДополнительныеСвойства) Экспорт
	
	мЗапрос = Новый Запрос(
	"ВЫБРАТЬ
	|	уатИзменениеСчетчиковТС.Ссылка КАК Регистратор,
	|	уатИзменениеСчетчиковТС.Дата КАК Период,
	|	ЗНАЧЕНИЕ(Перечисление.уатТипыСчетчиковТС.Спидометр) КАК ТипСчетчика,
	|	уатИзменениеСчетчиковТС.ПоказанияСпидометра КАК Значение,
	|	уатИзменениеСчетчиковТС.ТС
	|ИЗ
	|	Документ.уатИзменениеСчетчиковТС КАК уатИзменениеСчетчиковТС
	|ГДЕ
	|	уатИзменениеСчетчиковТС.Ссылка = &Ссылка
	|	И уатИзменениеСчетчиковТС.СпидометрИзменен
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	уатИзменениеСчетчиковТС.Ссылка,
	|	уатИзменениеСчетчиковТС.Дата,
	|	ЗНАЧЕНИЕ(Перечисление.уатТипыСчетчиковТС.СчетчикМЧ),
	|	уатИзменениеСчетчиковТС.ПоказанияСчетчикаМЧ,
	|	уатИзменениеСчетчиковТС.ТС
	|ИЗ
	|	Документ.уатИзменениеСчетчиковТС КАК уатИзменениеСчетчиковТС
	|ГДЕ
	|	уатИзменениеСчетчиковТС.Ссылка = &Ссылка
	|	И уатИзменениеСчетчиковТС.СчетчикМЧИзменен
	|");
	
	мЗапрос.УстановитьПараметр("Ссылка", ДокументСсылка);
	тблСчетчики = мЗапрос.Выполнить().Выгрузить();
	
	СтруктураДополнительныеСвойства.ТаблицыДляДвижений.Вставить("ТаблицаСчетчиковТС", тблСчетчики);
	
КонецПроцедуры // ИнициализироватьДанныеДокумента()

// Выполняет контроль возникновения отрицательных остатков.
//
Процедура ВыполнитьКонтроль(ДокументСсылка, ДополнительныеСвойства, Отказ, УдалениеПроведения = Ложь) Экспорт
	Заглушка = Истина;
КонецПроцедуры // ВыполнитьКонтроль()

// Заполняет список команд печати.
// 
// Параметры:
//   КомандыПечати – ТаблицаЗначений – состав полей см. в функции УправлениеПечатью.СоздатьКоллекциюКомандПечати
//
Процедура ДобавитьКомандыПечати(КомандыПечати) Экспорт
	Заглушка = Истина;
КонецПроцедуры

#КонецОбласти

#КонецЕсли